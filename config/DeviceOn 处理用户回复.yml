app:
  description: ''
  icon: ü§ñ
  icon_background: '#FFEAD5'
  mode: workflow
  name: DeviceOn Â§ÑÁêÜÁî®Êà∑ÂõûÂ§ç
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/ollama:0.0.3@9ded90ac00e8510119a24be7396ba77191c9610d5e1e29f59d68fa1229822fc7
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: 49dec224-315f-4cf7-884f-26b5cc538994
    name: add_task
    selector:
    - env
    - add_task
    value: app-qw3E0MI5rY47UbIvqhiM7FCu
    value_type: string
  - description: ''
    id: 66571786-6db5-4643-95e1-a6a628f6b26a
    name: path
    selector:
    - env
    - path
    value: http://172.21.161.126/v1/workflows/run
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1743646903355-source-1743647921683-target
      selected: false
      source: '1743646903355'
      sourceHandle: source
      target: '1743647921683'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1743647956265-source-1743647187640-target
      selected: false
      source: '1743647956265'
      sourceHandle: source
      target: '1743647187640'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1743647921683-false-1743647956265-target
      source: '1743647921683'
      sourceHandle: 'false'
      target: '1743647956265'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1743647921683-true-1743649547982-target
      source: '1743647921683'
      sourceHandle: 'true'
      target: '1743649547982'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: code
      id: 1743649547982-source-1743649657177-target
      source: '1743649547982'
      sourceHandle: source
      target: '1743649657177'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1743649657177-source-1743649783399-target
      source: '1743649657177'
      sourceHandle: source
      target: '1743649783399'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 1743649783399-false-1743649813355-target
      source: '1743649783399'
      sourceHandle: 'false'
      target: '1743649813355'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1743649783399-true-1743650029660-target
      source: '1743649783399'
      sourceHandle: 'true'
      target: '1743650029660'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 1743650029660-source-1743650119535-target
      source: '1743650029660'
      sourceHandle: source
      target: '1743650119535'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 1743650119535-source-1743650191385-target
      source: '1743650119535'
      sourceHandle: source
      target: '1743650191385'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1743650191385-source-1743650241516-target
      source: '1743650191385'
      sourceHandle: source
      target: '1743650241516'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: if-else
      id: 1743647921683-2b7657cb-c6e8-49da-9b58-6dba736b9a10-1743650298862-target
      source: '1743647921683'
      sourceHandle: 2b7657cb-c6e8-49da-9b58-6dba736b9a10
      target: '1743650298862'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1743650298862-false-1743650411232-target
      source: '1743650298862'
      sourceHandle: 'false'
      target: '1743650411232'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1743650411232-source-17436504566610-target
      source: '1743650411232'
      sourceHandle: source
      target: '17436504566610'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1743650298862-true-1743657193967-target
      source: '1743650298862'
      sourceHandle: 'true'
      target: '1743657193967'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: if-else
      id: 1743657193967-source-1743659852278-target
      source: '1743657193967'
      sourceHandle: source
      target: '1743659852278'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: end
      id: 1743659852278-false-1743659886921-target
      source: '1743659852278'
      sourceHandle: 'false'
      target: '1743659886921'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1743659852278-true-17436599506600-target
      source: '1743659852278'
      sourceHandle: 'true'
      target: '17436599506600'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: http-request
      id: 17436599506600-source-17436599536740-target
      source: '17436599506600'
      sourceHandle: source
      target: '17436599536740'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: http-request
        targetType: code
      id: 17436599536740-source-17436599619100-target
      source: '17436599536740'
      sourceHandle: source
      target: '17436599619100'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: code
        targetType: end
      id: 17436599619100-source-17436599645130-target
      source: '17436599619100'
      sourceHandle: source
      target: '17436599645130'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: code
      id: 1743647921683-399af84d-fc42-4db0-84f2-dd87bdba4df1-1743661523970-target
      source: '1743647921683'
      sourceHandle: 399af84d-fc42-4db0-84f2-dd87bdba4df1
      target: '1743661523970'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: code
        targetType: end
      id: 1743661523970-source-1743663304135-target
      source: '1743661523970'
      sourceHandle: source
      target: '1743663304135'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: ÂºÄÂßã
        type: start
        variables:
        - label: api
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: api
        - label: token
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: token
        - label: timezone
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: timezone
        - label: question
          max_length: 80000
          options: []
          required: true
          type: paragraph
          variable: question
        - label: content
          max_length: 80000
          options: []
          required: true
          type: paragraph
          variable: content
        - label: type
          max_length: 80000
          options: []
          required: true
          type: paragraph
          variable: type
      height: 220
      id: '1743646903355'
      position:
        x: 30
        y: 311
      positionAbsolute:
        x: 30
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1743647956265'
          - answer
          variable: answer
        - value_selector:
          - '1743647956265'
          - content
          variable: content
        - value_selector:
          - '1743647956265'
          - type
          variable: type
        selected: false
        title: ËøîÂõûÊï∞ÊçÆ
        type: end
      height: 142
      id: '1743647187640'
      position:
        x: 942
        y: 311
      positionAbsolute:
        x: 942
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: is
            id: 4fdc7c9a-2221-4144-8406-ffe7fc64e552
            value: control_task
            varType: string
            variable_selector:
            - '1743646903355'
            - type
          id: 'true'
          logical_operator: and
        - case_id: 2b7657cb-c6e8-49da-9b58-6dba736b9a10
          conditions:
          - comparison_operator: is
            id: dd187016-48a2-4c0b-a4b3-0568e2976655
            value: find_device
            varType: string
            variable_selector:
            - '1743646903355'
            - type
          - comparison_operator: is
            id: 824eae01-e182-4172-9e85-5de8ca9d82c2
            value: find_error
            varType: string
            variable_selector:
            - '1743646903355'
            - type
          id: 2b7657cb-c6e8-49da-9b58-6dba736b9a10
          logical_operator: or
        - case_id: 399af84d-fc42-4db0-84f2-dd87bdba4df1
          conditions:
          - comparison_operator: is
            id: 5f42d0ab-a915-4684-a377-5bde18049ac5
            value: remote_desktop
            varType: string
            variable_selector:
            - '1743646903355'
            - type
          id: 399af84d-fc42-4db0-84f2-dd87bdba4df1
          logical_operator: and
        desc: ''
        selected: false
        title: Âà§Êñ≠Â≠òÂú®‰ºöËØùÂèòÈáè
        type: if-else
      height: 248
      id: '1743647921683'
      position:
        x: 334
        y: 311
      positionAbsolute:
        x: 334
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "function main({}) {\n  return {\n    answer: 0,\n    content: '',\n\
          \    type: '',\n  }\n}"
        code_language: javascript
        desc: ''
        outputs:
          answer:
            children: null
            type: number
          content:
            children: null
            type: string
          type:
            children: null
            type: string
        selected: false
        title: Â§ÑÁêÜÊ≤°Êúâ‰ºöËØùÂèòÈáè
        type: code
        variables: []
      height: 54
      id: '1743647956265'
      position:
        x: 638
        y: 311
      positionAbsolute:
        x: 638
        y: 311
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: true
          variable_selector:
          - '1743646903355'
          - question
        desc: ''
        model:
          completion_params:
            num_ctx: 32768
            temperature: 0
          mode: chat
          name: deepseek-r1:14b
          provider: langgenius/ollama/ollama
        prompt_template:
        - id: 391e7b29-584f-483d-a4e9-4d0a6a7f6cb2
          role: system
          text: "# ÊñáÊú¨Á°ÆËÆ§Âà§Êñ≠ÊèêÁ§∫ËØç\n\n**‰ªªÂä°**  \nÂà§Êñ≠ËæìÂÖ•ÊñáÊú¨ÊòØÂê¶‰∏∫Á°ÆËÆ§/ËÇØÂÆöÊÄßË°®Ëø∞ÔºåËøîÂõûJSONÊ†ºÂºèÁªìÊûú„ÄÇ\n\n**ËæìÂÖ•ÊñáÊú¨**\
            \  \n{{#context#}}\n\n**Âà§Êñ≠Ê†áÂáÜ**  \n1. ÂåÖÂê´ÊòéÁ°ÆÂêåÊÑè/Á°ÆËÆ§ËØçÊ±áÔºàÂ¶ÇÔºöÂ•Ω„ÄÅÂ•ΩÁöÑ„ÄÅÁ°ÆÂÆö„ÄÅÂèØ‰ª•„ÄÅÊ≤°ÈóÆÈ¢ò„ÄÅÊòØÁöÑ„ÄÅOK„ÄÅGoÔºâ\
            \  \n2. Ë°®ËææÊ≠£ÂêëÂÆåÊàêÊÄÅÔºàÂ¶ÇÔºöÂ∑≤Â§ÑÁêÜ„ÄÅÂ∑≤ÂÆåÊàêÔºâ  \n3. ÁßØÊûÅÂõûÂ∫îËØ∑Ê±ÇÔºàÂ¶ÇÔºöÈ©¨‰∏äÂäû„ÄÅËøôÂ∞±ÂÅöÔºâ  \n4. ÊéíÈô§Âê¶ÂÆö/Ê®°Á≥äË°®Ëø∞ÔºàÂ¶ÇÔºö‰∏çË°å„ÄÅÂèØËÉΩÂêß„ÄÅÂÜçËØ¥Ôºâ\n\
            \n**Â§ÑÁêÜÊµÅÁ®ã**\n1. ÊñáÊú¨Ëß£ÊûêÔºöÊèêÂèñÊ†∏ÂøÉÂä®ËØç/Ë°®ÊÄÅËØç\n2. ËØ≠‰πâÂåπÈÖçÔºöÂØπÁÖßÁ°ÆËÆ§Ë°®ËææËØçÂ∫ì\n3. ËØ≠Â¢ÉÂàÜÊûêÔºöËØÜÂà´Â∫îÁ≠îÂØπË±°ÂÆåÊï¥ÊÄß\n\
            4. ÂèåÈáçÈ™åËØÅÔºö‰∫§ÂèâÊ£ÄÊü•Âê¶ÂÆöËØçÂ≠òÂú®ÊÄß\n\n**ËæìÂá∫Ë¶ÅÊ±Ç**  \n```json\n{\n  \"judgment\": \"<boolean>\"\
            ,\n  \"reason\": \"<‰∏çË∂ÖËøá15Â≠óÁöÑÂÖ≥ÈîÆËØç‰æùÊçÆ>\"\n}\n```\n"
        selected: false
        title: LLM Âà§Êñ≠ÊòØÂê¶Êñ∞Â¢û‰ªªÂä°
        type: llm
        variables: []
        vision:
          enabled: false
      height: 90
      id: '1743649547982'
      position:
        x: 638
        y: 431
      positionAbsolute:
        x: 638
        y: 431
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "function handleLLM(text) {\n  const regex = /```json([\\s\\S]*?)```/\n\
          \  const _res = text.replaceAll(/<think>[\\s\\S]*?<\\/think>/g, '')\n  const\
          \ match = _res.match(regex);\n  const res = !!match ? match[1].trim() :\
          \ _res\n  const str = res.replaceAll(/\\/\\/.*$/gm, '').replaceAll(/\\/\\\
          *[\\s\\S]*?\\*\\//g, '')\n  let obj\n  try {\n    obj = JSON.parse(str)\n\
          \  } catch (e) {\n    obj = {}\n  }\n  return obj\n}\nfunction main({text})\
          \ {\n  const obj = handleLLM(text)\n  return {\n    answer: !!obj?.['judgment']\
          \ && obj?.['judgment'] !== 'false' ? 1 : 0,\n    content: '',\n    type:\
          \ '',\n  }\n}"
        code_language: javascript
        desc: ''
        outputs:
          answer:
            children: null
            type: number
          content:
            children: null
            type: string
          type:
            children: null
            type: string
        selected: false
        title: Â§ÑÁêÜÊñ∞Â¢û‰ªªÂä°Âà§Êñ≠
        type: code
        variables: []
      height: 54
      id: '1743649657177'
      position:
        x: 942
        y: 493
      positionAbsolute:
        x: 942
        y: 493
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '='
            id: d304480f-a0d3-49b7-b3e5-a11061de2d8b
            value: '1'
            varType: number
            variable_selector:
            - '1743649657177'
            - answer
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: Âà§Êñ≠ÊòØÂê¶Êñ∞Â¢û‰ªªÂä°
        type: if-else
      height: 126
      id: '1743649783399'
      position:
        x: 1246
        y: 449
      positionAbsolute:
        x: 1246
        y: 449
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1743649657177'
          - answer
          variable: answer
        - value_selector:
          - '1743649657177'
          - content
          variable: content
        - value_selector:
          - '1743649657177'
          - type
          variable: type
        selected: false
        title: ËøîÂõûÊï∞ÊçÆ
        type: end
      height: 142
      id: '1743649813355'
      position:
        x: 1550
        y: 449
      positionAbsolute:
        x: 1550
        y: 449
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "/**\n * Êñ∞Â¢û‰ªªÂä° Request\n */\nfunction main({content, timezone, api, token})\
          \ {\n  return {\n    request: JSON.stringify({\n      inputs: {\n      \
          \  content,\n        timezone,\n        api,\n        token\n      },\n\
          \      response_mode: 'blocking',\n      user: 'deviceOn reply'\n    })\n\
          \  }\n}\n"
        code_language: javascript
        desc: ''
        outputs:
          request:
            children: null
            type: string
        selected: false
        title: Êñ∞Â¢û‰ªªÂä° Request
        type: code
        variables:
        - value_selector:
          - '1743646903355'
          - content
          variable: content
        - value_selector:
          - '1743646903355'
          - api
          variable: api
        - value_selector:
          - '1743646903355'
          - token
          variable: token
        - value_selector:
          - '1743646903355'
          - timezone
          variable: timezone
      height: 54
      id: '1743650029660'
      position:
        x: 1550
        y: 690
      positionAbsolute:
        x: 1550
        y: 690
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-45
            key: ''
            type: text
            value: '{{#1743650029660.request#}}'
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#env.add_task#}}

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: Êñ∞Â¢û‰ªªÂä°
        type: http-request
        url: '{{#env.path#}}'
        variables: []
      height: 123
      id: '1743650119535'
      position:
        x: 1854
        y: 646
      positionAbsolute:
        x: 1854
        y: 646
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "/**\n * Â§ÑÁêÜÊñ∞Â¢û‰ªªÂä°\n */\nfunction main({body}) {\n  const obj = JSON.parse(body)\n\
          \  const outputs = obj?.data?.outputs ?? {}\n  return {\n    result: outputs?.result\
          \ ?? '',\n    content: outputs?.content ?? '',\n    type: outputs?.type\
          \ ?? '',\n  }\n}\n\n"
        code_language: javascript
        desc: ''
        outputs:
          content:
            children: null
            type: string
          result:
            children: null
            type: string
          type:
            children: null
            type: string
        selected: false
        title: Â§ÑÁêÜÊñ∞Â¢û‰ªªÂä°
        type: code
        variables:
        - value_selector:
          - '1743650119535'
          - body
          variable: body
      height: 54
      id: '1743650191385'
      position:
        x: 2158
        y: 646
      positionAbsolute:
        x: 2158
        y: 646
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1743649657177'
          - answer
          variable: answer
        - value_selector:
          - '1743650191385'
          - result
          variable: result
        - value_selector:
          - '1743650191385'
          - content
          variable: content
        - value_selector:
          - '1743650191385'
          - type
          variable: type
        selected: false
        title: ËøîÂõûÊï∞ÊçÆ
        type: end
      height: 168
      id: '1743650241516'
      position:
        x: 2462
        y: 646
      positionAbsolute:
        x: 2462
        y: 646
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: end with
            id: 93d04f4d-5503-47af-a130-2dfe4f3fa8e2
            value: ' REMOTE_DESKTOP'
            varType: string
            variable_selector:
            - '1743646903355'
            - question
          - comparison_operator: end with
            id: e7bb9dd9-cd30-40b5-a977-25c29f8c48ae
            value: ' REBOOT'
            varType: string
            variable_selector:
            - '1743646903355'
            - question
          id: 'true'
          logical_operator: or
        desc: ''
        selected: false
        title: Âà§Êñ≠Áî®Êà∑ÊòØÂê¶ÁÇπÂáªÊåâÈíÆ
        type: if-else
      height: 152
      id: '1743650298862'
      position:
        x: 638
        y: 574
      positionAbsolute:
        x: 638
        y: 574
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "function main({}) {\n  return {\n    answer: 0,\n  }\n}\n"
        code_language: javascript
        desc: ''
        outputs:
          answer:
            children: null
            type: number
        selected: false
        title: Â§ÑÁêÜÊ≤°ÊúâÁÇπÂáªÊåâÈíÆ
        type: code
        variables: []
      height: 54
      id: '1743650411232'
      position:
        x: 942
        y: 667
      positionAbsolute:
        x: 942
        y: 667
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1743650411232'
          - answer
          variable: answer
        - value_selector:
          - '1743646903355'
          - content
          variable: content
        - value_selector:
          - '1743646903355'
          - type
          variable: type
        selected: false
        title: ËøîÂõûÊï∞ÊçÆ
        type: end
      height: 142
      id: '17436504566610'
      position:
        x: 1246
        y: 615
      positionAbsolute:
        x: 1246
        y: 615
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\nfunction main({question, content}) {\n  const obj = JSON.parse(content)\n\
          \  const query = String(question)\n  const device = Array.isArray(obj?.data?.targetDevices)\
          \ ? Array.from(obj?.data?.targetDevices) : []\n  const filter = device.filter(o\
          \ => {\n    return query.includes(o?.id) || query.includes(o?.name) || query.includes(o?.ip)\n\
          \  })\n  let result = JSON.stringify({\n    type: 'find_device',\n    data:\
          \ {\n      ...obj.data,\n      assign_device: true,\n      targetDevices:\
          \ filter,\n    }\n  })\n  let add_task = 0\n  if (filter.length === 1) {\n\
          \    if (query.endsWith(' REMOTE_DESKTOP')) {\n      result = JSON.stringify({\n\
          \        type: 'remote_desktop',\n        data: {\n          ...obj.data,\n\
          \          targetDevices: filter,\n        }\n      })\n    }\n    if (query.endsWith('\
          \ REBOOT')) {\n      result = JSON.stringify({\n        type: 'control_task',\n\
          \        data: {\n          ...obj.data,\n          targetDevices: filter,\n\
          \          actionCode: '90001',\n          schedule: {\n            scheduleType:\
          \ 'NONE',\n          }\n        }\n      })\n      add_task = 1\n    }\n\
          \  }\n  return {\n    result,\n    content: filter.length > 1 ? result :\
          \ '',\n    type: filter.length > 1 ? 'find_device' : '',\n    add_task,\n\
          \    answer: 1\n  }\n}"
        code_language: javascript
        desc: ''
        outputs:
          add_task:
            children: null
            type: number
          answer:
            children: null
            type: number
          content:
            children: null
            type: string
          result:
            children: null
            type: string
          type:
            children: null
            type: string
        selected: false
        title: Â§ÑÁêÜÁÇπÂáª‰∫ÜÊåâÈíÆ
        type: code
        variables:
        - value_selector:
          - '1743646903355'
          - question
          variable: question
        - value_selector:
          - '1743646903355'
          - content
          variable: content
      height: 54
      id: '1743657193967'
      position:
        x: 942
        y: 841
      positionAbsolute:
        x: 942
        y: 841
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: '='
            id: b16f63fa-1d4b-4bd7-bd06-0f07730b044f
            value: '1'
            varType: number
            variable_selector:
            - '1743657193967'
            - add_task
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: Âà§Êñ≠ÊòØÂê¶Êñ∞Â¢ûÈáçÂêØ‰ªªÂä°
        type: if-else
      height: 126
      id: '1743659852278'
      position:
        x: 1246
        y: 797
      positionAbsolute:
        x: 1246
        y: 797
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1743657193967'
          - answer
          variable: answer
        - value_selector:
          - '1743657193967'
          - result
          variable: result
        - value_selector:
          - '1743657193967'
          - content
          variable: content
        - value_selector:
          - '1743657193967'
          - type
          variable: type
        selected: false
        title: ËøîÂõûÊï∞ÊçÆ
        type: end
      height: 168
      id: '1743659886921'
      position:
        x: 1550
        y: 784
      positionAbsolute:
        x: 1550
        y: 784
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "/**\n * Êñ∞Â¢û‰ªªÂä° Request\n */\nfunction main({result, timezone, api, token})\
          \ {\n  return {\n    request: JSON.stringify({\n      inputs: {\n      \
          \  content: result,\n        timezone,\n        api,\n        token\n  \
          \    },\n      response_mode: 'blocking',\n      user: 'deviceOn reply'\n\
          \    })\n  }\n}\n"
        code_language: javascript
        desc: ''
        outputs:
          request:
            children: null
            type: string
        selected: false
        title: Êñ∞Â¢û‰ªªÂä° Request
        type: code
        variables:
        - value_selector:
          - '1743657193967'
          - result
          variable: result
        - value_selector:
          - '1743646903355'
          - api
          variable: api
        - value_selector:
          - '1743646903355'
          - token
          variable: token
        - value_selector:
          - '1743646903355'
          - timezone
          variable: timezone
      height: 54
      id: '17436599506600'
      position:
        x: 1550
        y: 992
      positionAbsolute:
        x: 1550
        y: 992
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-45
            key: ''
            type: text
            value: '{{#17436599506600.request#}}'
          type: json
        desc: ''
        headers: 'Authorization:Bearer {{#env.add_task#}}

          Content-Type:application/json'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: Êñ∞Â¢û‰ªªÂä°
        type: http-request
        url: '{{#env.path#}}'
        variables: []
      height: 123
      id: '17436599536740'
      position:
        x: 1854
        y: 948
      positionAbsolute:
        x: 1854
        y: 948
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "/**\n * Â§ÑÁêÜÊñ∞Â¢û‰ªªÂä°\n */\nfunction main({body}) {\n  const obj = JSON.parse(body)\n\
          \  const outputs = obj?.data?.outputs ?? {}\n  return {\n    result: outputs?.result\
          \ ?? '',\n    content: outputs?.content ?? '',\n    type: outputs?.type\
          \ ?? '',\n  }\n}\n\n"
        code_language: javascript
        desc: ''
        outputs:
          content:
            children: null
            type: string
          result:
            children: null
            type: string
          type:
            children: null
            type: string
        selected: false
        title: Â§ÑÁêÜÊñ∞Â¢û‰ªªÂä°
        type: code
        variables:
        - value_selector:
          - '17436599536740'
          - body
          variable: body
      height: 54
      id: '17436599619100'
      position:
        x: 2158
        y: 948
      positionAbsolute:
        x: 2158
        y: 948
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1743657193967'
          - answer
          variable: answer
        - value_selector:
          - '17436599619100'
          - result
          variable: result
        - value_selector:
          - '17436599619100'
          - content
          variable: content
        - value_selector:
          - '17436599619100'
          - type
          variable: type
        selected: false
        title: ËøîÂõûÊï∞ÊçÆ
        type: end
      height: 168
      id: '17436599645130'
      position:
        x: 2462
        y: 948
      positionAbsolute:
        x: 2462
        y: 948
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "\nfunction main({question, content}) {\n  const obj = JSON.parse(content)\n\
          \  const query = String(question)\n  const device = Array.isArray(obj?.data?.targetDevices)\
          \ ? Array.from(obj?.data?.targetDevices) : []\n  const filter = device.filter(o\
          \ => {\n    return query.includes(o?.id) || query.includes(o?.name) || query.includes(o?.ip)\n\
          \  })\n  const result = JSON.stringify({\n    type: 'remote_desktop',\n\
          \    data: {\n      ...obj.data,\n      targetDevices: filter,\n    }\n\
          \  })\n  return {\n    result,\n    content: filter.length > 1 ? result\
          \ : '',\n    type: filter.length > 1 ? 'remote_desktop' : '',\n    answer:\
          \ 1\n  }\n}\n"
        code_language: javascript
        desc: ''
        outputs:
          answer:
            children: null
            type: number
          content:
            children: null
            type: string
          result:
            children: null
            type: string
          type:
            children: null
            type: string
        selected: false
        title: Â§ÑÁêÜËøúÁ®ãÊ°åÈù¢
        type: code
        variables:
        - value_selector:
          - '1743646903355'
          - question
          variable: question
        - value_selector:
          - '1743646903355'
          - content
          variable: content
      height: 54
      id: '1743661523970'
      position:
        x: 638
        y: 948
      positionAbsolute:
        x: 638
        y: 948
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1743661523970'
          - answer
          variable: answer
        - value_selector:
          - '1743661523970'
          - result
          variable: result
        - value_selector:
          - '1743661523970'
          - content
          variable: content
        - value_selector:
          - '1743661523970'
          - type
          variable: type
        selected: false
        title: ËøîÂõûÊï∞ÊçÆ
        type: end
      height: 168
      id: '1743663304135'
      position:
        x: 942
        y: 935
      positionAbsolute:
        x: 942
        y: 935
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    viewport:
      x: 95.14546850777288
      y: -252.02823567067355
      zoom: 1.3195079107728942
